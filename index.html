<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bat ball stump</title>
   
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
   <div class="container font-bold text-center">
    <h1>Bat Ball Stump Game</h1>

    <h3>
       RULLS: <br>
    1. bat  & ball -> winner bat <br>
    2. ball & stump -> winner ball <br>
    3. stump & bat -> winner stump 
    </h3>

    <button onclick="
    
    randomNumber = Math.random();
   
    computerChoice=compChoice();
    
    
    getResult(computerChoice,'bat');

    document.querySelector('#display').innerText=`you have chosen bat \n computer has chosen : ${computerChoice}`;
    score.displayScore();
    "><img src="bat.png" class="button_image" alt="bat"></button>

    <button onclick="
    randomNumber = Math.random();
    computerChoice=compChoice();

    getResult(computerChoice,'ball');


    document.querySelector('#display').innerText=`you have chosen ball \n computer has chosen : ${computerChoice}`;
   score.displayScore();
    
    "><img src="ball.png" class="button_image" alt="Ball"></button>
    <button onclick="
    randomNumber = Math.random();
    computerChoice=compChoice();
    
    getResult(computerChoice,'stump');
    
    document.querySelector('#display').innerText=`you have chosen: stump \n computer has chosen : ${computerChoice}`;

    score.displayScore();
    
    "><img src="stump.png" class="button_image" alt="stump"></button>

    <button onclick="
    score.win = 0;
    score.fail = 0;
    score.tie = 0;
    localStorage.clear();
    document.querySelector('#display').innerText= '';
    score.displayScore();
    ">RESET</button>
    <hr>
    <div id="display"></div>
    <div id="displayResult"></div>

    
   </div>

 
   
    <script>
    
    let randomNumber = 0;
    let computerChoice = ''; 
    let scoreStr = localStorage.getItem('score');

    let score = JSON.parse(scoreStr) || {
        win : 0,
        fail : 0,
        tie : 0,
    };
    // if(scoreStr!==undefined)
    // {
    //     return score;
    // }
    // else {
    //     score = {
    //     win : 0,
    //     fail : 0,
    //     tie : 0,
        
    // };
    // }
    

    score.displayScore = function(){
            document.querySelector('#displayResult').innerText = `win = ${score.win} \n loss = ${score.fail} \n tie = ${score.tie}`
        }
    

    


    function compChoice()
    {  let choice = '';
        if(randomNumber > 0 && randomNumber<= 1/3)
        {
            choice = 'bat'; 
        }
    else if(randomNumber > 1/3 && randomNumber<= 2/3)
        {
            choice = 'ball'; 
        }
    else
        {
            choice = 'stump'; 
        }
        return choice;
    }
    function getResult(compChoice,userChoice)

    {
        localStorage.setItem('score',JSON.stringify(score));

        if(compChoice === 'bat' && userChoice ==='ball')
        {
            score.fail+=1;
        }
        else if(compChoice === 'ball' && userChoice ==='bat')
        {
            score.win+=1;
        }
        else if(compChoice === 'bat' && userChoice ==='stump')
        {
            score.win+=1;
        }
        else if(compChoice === 'ball' && userChoice ==='stump')
        {
            score.fail+=1;
        }
        else if(compChoice === 'stump' && userChoice ==='bat')
        {
            score.fail+=1;
        }
        else if(compChoice === 'stump' && userChoice ==='ball')
        {
            score.win+=1;
        }
        else
        {
            score.tie+=1;
        }
    }
    let button = document.querySelector('#my_button');
    function updateBut(){
        button.innerText ++
    }
    
    // if(temp%2===0)
    // {
    //     document.querySelector('click_res')
    // }
    
       
    </script>
</body>
</html>